# BR! 環境セットアップ キット (BR! Setup Toolkit)

[![ライセンス: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![フレームワーク: Electron](https://img.shields.io/badge/Framework-Electron-blue.svg)](https://www.electronjs.org/)
[![UI: Angular](https://img.shields.io/badge/UI-Angular-red.svg)](https://angular.io/)

BizRobo! の導入・運用・保守作業を支援するために開発された、クロスプラットフォーム対応のデスクトップツールキットです。

BizRobo!は強力な RPA プラットフォームですが、その導入や環境構築には、サーバーコンポーネント間の複雑なネットワーク設定や、環境に依存した設定変更が伴います。このツールキットは、そうした作業を効率化し、ヒューマンエラーを削減することを目的に開発されました。

## ✨ 主な機能

### 1. コンポーネント間疎通チェッカー

BizRobo! の各コンポーネント間のネットワーク接続（Ping 疎通、TCP ポート接続）を GUI で簡単に確認できます。ファイアウォールの設定ミスや名前解決の問題など、接続トラブルの初期調査に絶大な効果を発揮します。

- **動的な入力フォーム**: チェックの発信元となるコンポーネント（MC, RS, DAS など）を選択すると、それに必要な接続先情報が自動で表示されます。
- **視覚的な構成図**: 入力したパラメータがリアルタイムで構成図に反映され、チェック対象の全体像を直感的に把握できます。
- **強力なファイアウォールチェック**:
  - **コンポーネント間チェック**: リモートサーバーのポート開放状況を確認します。
  - **自端末チェック**: ツールを実行している端末自身のファイアウォール設定をテストします。指定ポートでの Inbound(待ち受け可否)/Outbound(通信可否)をチェックし、サーバー側の設定不備かクライアント側の問題かを切り分けるのに役立ちます。
- **ログ出力機能**: チェック結果は詳細なログとして表示され、テキストファイルとして保存できるため、報告やエビデンス作成に便利です。

_(スクリーンショットのプレースホルダー: 疎通チェッカーの実行画面)_

### 2. バックアップファイル編集ツール

Management Console (MC) からエクスポートした ZIP 形式のバックアップファイル内の、クラスター設定（`Production` ↔ `Non Production`）を一括で切り替えます。

- **広範囲な対応**: `global.xml` に加え、各プロジェクトフォルダ（`Project_xxx`）内の `project.xml` も自動でスキャンし、設定を更新します。
- **簡単な操作**: ファイルを選択してボタンを押すだけで、煩雑な XML 編集作業が完了します。
- **安全な処理**: 手作業による XML の構文破壊や、編集箇所の漏れといったミスを防ぎます。
- **高速な実行**: 本番環境から開発環境への設定移行など、繰り返し発生する作業を迅速に行えます。

_(スクリーンショットのプレースホルダー: バックアップ編集ツールの画面)_

### 3. ライセンス認証ブラウザー

動作要件を満たすブラウザがインストールされていないサーバー環境でも、安全に MC へアクセスし、ライセンス認証を行うための組み込みブラウザ機能です。

- **隔離されたセッション**: ウィンドウはプライベートモードで起動し、Cookie、キャッシュ、履歴などのデータはウィンドウを閉じると完全に消去されます。
- **認証の無効化**: Windows 統合認証(NTLM)による自動ログインをブロックするため、意図しないアカウントでのログインを防ぎ、確実に認証画面を表示させます。
- **自己署名証明書対応**: `localhost` や `127.0.0.1` に対する自己署名証明書（オレオレ証明書）のエラーを無視し、HTTPS 接続を可能にします。

_(スクリーンショットのプレースホルダー: ライセンス認証ブラウザーの画面)_

### 4. テーブルデータ抽出

データベースに直接接続し、指定したテーブルの全データを CSV ファイルとして ZIP 形式でエクスポートします。

- **DB クライアント不要**: GUI 操作だけでデータベースのテーブル内容を確認し、出力できます。
- **プロファイル連携**: 後述の「アプリケーション設定」で登録した接続情報を利用するため、安全かつ簡単にデータベースへ接続できます。
- **データプレビュー**: エクスポート前にテーブルデータの先頭 100 件をプレビュー表示し、対象データが正しいかを確認できます。
- **柔軟な出力**: テーブル一覧から任意のテーブルを選択し、`テーブル名_日付.zip` という分かりやすいファイル名でデータを保存します。

_(スクリーンショットのプレースホルダー: データ抽出ツールの画面)_

### 5. アプリケーション設定

「テーブルデータ抽出」機能などで使用する、複数のデータベース接続プロファイルを管理します。

- **複数プロファイルの管理**: 開発用、本番用など、複数のデータベース接続情報を安全に保存し、簡単に切り替えることができます。
- **接続テスト機能**: 保存する前に、入力した情報で実際にデータベースへ接続できるかをテストできます。
- **直感的な UI**: 設定の追加・編集・削除がリストとフォームで分かりやすく行えます。

_(スクリーンショットのプレースホルダー: アプリケーション設定画面)_

## 📦 インストール

最新バージョンのインストーラーは、リリースページからダウンロードしてください。

➡️ **[最新のリリースをダウンロード](https://github.com/1010-junji/br-setup-tookit/releases/)**

Windows 向けには、インストーラー版 (`.exe`) と、インストール不要のポータブル版 (`.exe`) を提供しています。

## 🚀 使い方

1.  アプリケーションを起動し、ホーム画面から利用したい機能を選択してください。
2.  各機能の画面に表示される指示に従って操作を進めることができます。
3.  **「テーブルデータ抽出」機能を利用する場合**は、最初にサイドバーの歯車アイコン (⚙️) から「アプリケーション設定」画面を開き、データベース接続情報を登録してください。

## 🛠️ 開発者向け情報

このアプリケーションの開発に参加、または自身でビルドする場合は、以下の手順に従ってください。

### 前提条件

- [Node.js](https://nodejs.org/) (v20.18.1 以上を推奨)
- npm (Node.js に同梱)

### セットアップ

1.  リポジトリをクローンします。

    ```bash
    git clone https://github.com/1010-junji/br-setup-toolkit.git
    cd br-setup-toolkit
    ```

2.  バックエンド（Electron）の依存関係をインストールします。

    ```bash
    cd server
    npm install
    ```

3.  フロントエンド（Angular）の依存関係をインストールします。
    ```bash
    cd ../client
    npm install
    ```

### 開発サーバーの起動

開発中は、フロントエンドとバックエンドを別々のターミナルで起動し、ホットリロードの恩恵を受けることを推奨します。

1.  **ターミナル 1: Angular フロントエンド**
    Angular の開発サーバーを起動します。これにより、コード変更が即座にブラウザに反映されます。

    ```bash
    cd client
    npm start
    ```

2.  **ターミナル 2: Electron バックエンド (Watch モード)**
    Electron のメインプロセスとプリロードスクリプトの変更を監視し、自動でビルドします。

    ```bash
    cd server
    npm run watch
    ```

3.  **ターミナル 3: Electron アプリケーション起動**
    Electron アプリケーション本体を起動します。バックエンドのコードを変更した場合は、ターミナル 2 でビルドが完了したのを確認してから、このターミナルでアプリケーションを再起動（`Ctrl+C`で停止後、再度`npm start`）してください。
    ```bash
    cd server
    npm start
    ```

### アプリケーションのビルドとパッケージング

配布用の実行ファイルを生成します。

1.  **フロントエンドのビルド**
    Angular アプリケーションを本番用にビルドします。

    ```bash
    cd client
    npm run build
    ```

2.  **バックエンドのビルドとパッケージング**
    Electron アプリケーションをビルドし、インストーラーや実行ファイルを生成します。

    ```bash
    cd server
    npm run package
    ```

    成果物は `server/release` ディレクトリに出力されます。

## 💻 技術スタック

- **メインフレームワーク**: [Electron](https://www.electronjs.org/) (^37.1.0)
- **UI フレームワーク**: [Angular](https://angular.io/) (^14.2.0)
- **UI コンポーネント**: [Angular Material](https://material.angular.io/) (^14.2.7)
- **言語**: [TypeScript](https://www.typescriptlang.org/)
- **ビルドツール**: [esbuild](https://esbuild.github.io/) (バックエンド), [Angular CLI](https://angular.io/cli) (フロントエンド)
- **パッケージング**: [electron-builder](https://www.electron.build/)
- **主なライブラリ**:
  - `mysql2`: MySQL データベース接続
  - `adm-zip`: ZIP ファイルの圧縮・展開
  - `fast-csv`: CSV データのフォーマット
  - `xmldom`: XML のパースとシリアライズ

## 📜 ライセンス

このプロジェクトは MIT License の下で公開されています。詳細は [LICENSE](LICENSE) ファイルをご覧ください。
