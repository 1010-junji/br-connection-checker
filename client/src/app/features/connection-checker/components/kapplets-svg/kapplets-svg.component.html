<svg viewBox="0 0 400 320" class="architecture-svg" preserveAspectRatio="xMidYMin meet">
    <defs>
        <marker id="arrowhead-kapplets" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
            <polygon points="0 0, 10 3.5, 0 7" class="arrow-head" />
        </marker>
    </defs>

    <!-- Kapplets (Self) -->
    <g class="self-text">
        <rect x="125" y="20" width="150" height="70" class="shape self-fill" />
        <text x="200" y="45" class="title-text">Kapplets</text>
        <text x="140" y="70" class="param-label">ポート:</text>
        <text x="185" y="70" class="param-value">{{ params['kappletsport'] || '?' }}</text>
    </g>

    <!-- DB Server (Cleaned up Drum Shape) -->
    <g>
        <title>DB Server</title>
        <!-- Drum body -->
        <path class="shape db-border" d="M 20,140 V 200 A 80,15 0 0 0 180,200 V 140" />
        <!-- Drum top lid -->
        <ellipse class="shape db-border" cx="100" cy="140" rx="80" ry="15" />
        <text x="100" y="145" class="title-text">DBサーバー</text>
        <text x="30" y="175" class="param-label">ホスト:</text>
        <text x="75" y="175" class="param-value">{{ params['dbhost'] || '?' }}</text>
        <text x="30" y="195" class="param-label">ポート:</text>
        <text x="75" y="195" class="param-value">{{ params['dbport'] || '?' }}</text>
    </g>

    <!-- MC Server -->
    <g>
        <rect x="210" y="185" width="170" height="80" class="shape mc-border" />
        <text x="295" y="210" class="title-text">MCサーバー</text>
        <text x="225" y="235" class="param-label">ホスト:</text>
        <text x="270" y="235" class="param-value">{{ params['mchost'] || '?' }}</text>
        <text x="225" y="255" class="param-label">ポート:</text>
        <text x="270" y="255" class="param-value">{{ params['mcport'] || '?' }}</text>
    </g>

    <!-- Arrows -->
    <path d="M 175 90 V 105 H 100 V 115" class="arrow" marker-end="url(#arrowhead-kapplets)" />
    <path d="M 225 90 V 175" class="arrow" marker-end="url(#arrowhead-kapplets)" />


</svg>